class Solution {
public:
    vector<int> findOrder(int numCourses, vector<vector<int>>& prerequisites) {
        // å»ºç«‹é„°æ¥è¡¨ï¼šgraph[i] å­˜æ”¾ã€Œä»¥èª²ç¨‹ i ç‚ºå‰ç½®çš„å¾ŒçºŒèª²ç¨‹ã€
        vector<vector<int>> graph(numCourses);

        // indegree[i] è¡¨ç¤ºèª²ç¨‹ i ç›®å‰é‚„æœ‰å¹¾å€‹å‰ç½®èª²ç¨‹æ²’ä¿®
        vector<int> indegree(numCourses, 0);

        // è™•ç†å…ˆä¿®èª²è³‡è¨Šï¼Œå»ºç«‹åœ–èˆ‡å…¥åº¦è¡¨
        for (int i = 0; i < prerequisites.size(); i++) {
            int a = prerequisites[i][0]; // a æ˜¯è¦ä¿®çš„èª²
            int b = prerequisites[i][1]; // b æ˜¯ a çš„å‰ç½®èª²
            graph[b].push_back(a);       // b æ˜¯å‰ç½®ï¼ŒæŒ‡å‘ a
            indegree[a]++;               // a å¤šäº†ä¸€å€‹å‰ç½®èª²
        }

        queue<int> q;

        // å°‡æ‰€æœ‰å…¥åº¦ç‚º 0ï¼ˆæ²’æœ‰å‰ç½®èª²ç¨‹ï¼‰çš„èª²ä¸Ÿé€² queue
        for (int i = 0; i < numCourses; ++i) {
            if (indegree[i] == 0) {
                q.push(i);
            }
        }

        vector<int> result;

        // æ‹“æ’²æ’åºä¸»è¿´åœˆï¼šå¾å…¥åº¦ç‚º 0 çš„èª²é–‹å§‹ä¿®
        while (!q.empty()) {
            int course = q.front(); // å–å‡ºå¯ä»¥ä¿®çš„èª²
            q.pop();
            result.push_back(course); // åŠ å…¥ä¿®èª²é †åº

            // è™•ç†é€™é–€èª²çš„å¾ŒçºŒèª²ç¨‹
            for (int i = 0; i < graph[course].size(); i++) {
                int next = graph[course][i]; // å¾ŒçºŒèª²ç¨‹
                indegree[next]--;            // å®ƒçš„å‰ç½®èª²å®Œæˆäº†ï¼Œå…¥åº¦ -1
                if (indegree[next] == 0) {   // è‹¥å…¥åº¦è®Š 0ï¼Œä»£è¡¨å¯ä»¥ä¿®äº†
                    q.push(next);           // ä¸Ÿé€² queue ç­‰å¾…å¾ŒçºŒè™•ç†
                }
            }
        }

        // å¦‚æœç„¡æ³•ä¿®å®Œæ‰€æœ‰èª²ï¼Œè¡¨ç¤ºæœ‰å¾ªç’°ï¼Œå›å‚³ç©ºé™£åˆ—
        if (result.size() != numCourses) return {};

        // å›å‚³åˆæ³•çš„ä¿®èª²é †åº
        return result;
    }
}; // ğŸ‘ˆé€™è£¡æ‰æ˜¯ class çš„æ­£ç¢ºçµå°¾
